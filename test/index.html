<!doctype html>
<html>
<head>
<style>
      pre{   padding:5px 5px 5px 5px;margin:5px 5px 5px 5px;border:5px solid blue;    }
</style>
<script src="sqlite.js"></script>
<script src="dbsql.js"></script>
<script>
function log_o(o){
      try{console.log(o);}catch(e){}
      try{document.getElementById('pre1').innerHTML+=("\r\n\r\n"+o);}catch(e2){}
      };



function defineDb()
{
      var tmpf = function()
      {
        log_o('Working...');
        try{
              var s = getDbSql();
              log_o('got sql');
              var db = SQL.open();
              log_o('opened db');
              var tmpdata = db.exec(s);
              log_o('defined test db:\n'+JSON.stringify(tmpdata));
              tmpdata = db.dump();
              log_o('db dump:\n'+JSON.stringify(tmpdata));
              log_o('inserted row:\n'+JSON.stringify(tmpdata));
              var q1 = " select * from \"Album\" ; ";
              var rtn = db.exec(q1);
              log_o('ran query: '+q1);
              log_o("output: ");
              log_o(rtn);
        }catch(ex1){log_o(ex1);rtn += "\r\nError: \r\n"+ex1.message;}
      };
  setTimeout(tmpf,100);
}
function showAlbums()
{
      var tmpf = function()
      {
        log_o('Working...');
        try{
              var db = SQL.open();
              log_o('opened db to show albums');
              var q1 = " select * from \"Album\" ; ";
              var rtn = db.exec(q1);
              log_o('ran query: '+q1);
              log_o("output: ");
              log_o(rtn);
        }catch(ex1){log_o(ex1);rtn += "\r\nError: \r\n"+ex1.message;}
      };
  setTimeout(tmpf,100);
}
</script>
</head>
<body>
<p><button type="button" onclick="defineDb();">Define DB</button></p>
<p><button type="button" onclick="showAlbums();">Show Albums</button></p>
<p><pre id="pre1"></pre></p>
</body>
</html>

